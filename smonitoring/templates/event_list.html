{% extends "layout.html" %}

{% block body %}
	<h4 class="text-center">{{ page_title }}</h4>
	<form method="GET">
			<div class="pull-right">
					<input type="search" name="search" id="search" placeholder="Rechercher" />
					<button type="submit" class="btn btn-sm btn-success">Rechercher</button>
			</div>
	</form>
	<div class="table-responsive">
		<table class="table table-striped table-hover">
			<th>Evénement</th><th>Site</th><th>FAI</th><th>Département</th><th>Région</th><th>Date Evénement</th><th>Actions</th>
			{% if page_obj %}
				{% for event in page_obj %}
					<tr class="{{event.status_ev}} togle-case">
						<td>{{ event.entite_concerne }} {{ event.status_ev }}</td>
						<td>{{ event.code_site }}</td>
						<td>{{ event.code_site.fai }}</td>
						<td>{{ event.code_site.departement }}</td>
						<td>{{ event.code_site.region }}</td>
						<td>{{ event.date_ev }}</td>
						<td>
							<a href="#" class="btn btn-info btn-sm"><span class="fa fa-eye" title="Voir"></span></a>
							<a href="{% url 'edit_event' event.id %}" class="btn btn-warning btn-sm"><span class="fa fa-pencil" title="Modifier"></span></a>
						</td>
					</tr>
				{% endfor %}
			{% endif %}
		</table>
	</div>
	<div>{% include "_paginationhelpers.html" %}</div>
<script>
document.addEventListener('DOMContentLoaded', function(){
	//keeping search value in the searchbox
	var queryString= window.location.search;
	const urlParams = new URLSearchParams(queryString);
	var search = document.querySelector('#search');
	search.value = urlParams.get('search');
	});
</script>
{% endblock %}
